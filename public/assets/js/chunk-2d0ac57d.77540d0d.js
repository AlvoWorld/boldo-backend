(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac57d"],{"18aa":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mb-2",staticStyle:{"align-items":"center","flex-direction":"row",display:"flex"}},[a("b-alert",{staticClass:"rounded mr-4",staticStyle:{"margin-bottom":"0px",flex:"1"},attrs:{show:"",variant:"primary"}},[t._v("This action will refesh all users app.")]),t._v(" "),a("div",{staticClass:"top-right-button-container"},[a("b-button",{staticClass:"mb-2",attrs:{variant:"primary",size:"lg",disabled:t.loading},on:{click:function(e){return t.newItem()}}},[t._v(t._s(t.$t("survey.add-new")))])],1)],1),t._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[t.loading?a("div",{staticClass:"loading"}):a("b-card",{staticClass:"mb-4",attrs:{title:"Registered Types"}},[a("b-table",{ref:"custom-table",staticClass:"vuetable",attrs:{"sort-by":"title","sort-desc.sync":"false",selectable:"","select-mode":t.bootstrapTable.selectMode,"current-page":t.currentPage,selectedVariant:"primary",fields:t.bootstrapTable.fields,items:t.items},on:{"row-selected":t.rowSelected},scopedSlots:t._u([{key:"cell(style)",fn:function(e){return[a("p",{attrs:{hidden:1==e.item.style}},[t._v("\n              No\n            ")]),t._v(" "),a("p",{attrs:{hidden:0==e.item.style}},[t._v("\n              Yes\n            ")])]}},{key:"cell(action)",fn:function(e){return[a("b-button",{staticClass:"icon-button mb-1",attrs:{size:"sm",variant:"primary default"},on:{click:function(a){return t.editItem(e.item,e.index,a.target)}}},[a("i",{staticClass:"simple-icon-pencil"})]),t._v(" "),a("b-button",{staticClass:"icon-button mb-1",attrs:{size:"sm",variant:"danger default"},on:{click:function(a){return t.deleteItem(e.item,e.index,a.target)}}},[a("i",{staticClass:"simple-icon-trash"})])]}}],null,!1,4048773020)}),t._v(" "),a("b-pagination",{attrs:{size:"sm",align:"center","total-rows":t.totalRows,"per-page":t.perPage},scopedSlots:t._u([{key:"next-text",fn:function(){return[a("i",{staticClass:"simple-icon-arrow-right"})]},proxy:!0},{key:"prev-text",fn:function(){return[a("i",{staticClass:"simple-icon-arrow-left"})]},proxy:!0},{key:"first-text",fn:function(){return[a("i",{staticClass:"simple-icon-control-start"})]},proxy:!0},{key:"last-text",fn:function(){return[a("i",{staticClass:"simple-icon-control-end"})]},proxy:!0}],null,!1,2104427419),model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1),t._v(" "),a("b-modal",{ref:"modalbasic",attrs:{id:"modalbasic",title:"Type"}},[a("b-form-group",{attrs:{label:"Name"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Show Style"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.style,expression:"item.style"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.item.style)?t._i(t.item.style,null)>-1:t.item.style},on:{change:function(e){var a=t.item.style,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);i.checked?o<0&&t.$set(t.item,"style",a.concat([n])):o>-1&&t.$set(t.item,"style",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.item,"style",s)}}})]),t._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"mr-1",attrs:{disabled:t.loading,variant:"success default"},on:{click:function(e){return t.saveItem()}}},[t._v("Save")]),t._v(" "),a("b-button",{attrs:{disabled:t.loading,variant:"dark default"},on:{click:function(e){return t.hideModal()}}},[t._v("Cancel")])],1)],2)],1)},s=[],n=(a("4160"),a("b0c0"),a("d3b7"),a("159b"),a("5530")),o=a("f488"),r=a("2f62"),l={components:{},data:function(){return{loading:!1,items:[],bootstrapTable:{selected:[],selectMode:"single",fields:[{key:"no",label:"No",sortable:!0,sortDirection:"desc",tdClass:"list-item-heading"},{key:"name",label:"Name",sortable:!0},{key:"style",label:"Style",sortable:!0},{key:"action",label:"Action"}]},currentPage:1,perPage:10,totalRows:0,item:{id:-1,name:"",style:!1,sort:1},item_id:-1}},computed:Object(n["a"])({},Object(r["c"])({currentUser:"currentUser"})),methods:{getData:function(){var t=this,e="admin/get_types",a={page:this.currentPage};this.loading=!0,o["a"].post(e,JSON.stringify(a),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.currentUser.token)}}).then((function(e){if(e.data.success){var a=e.data.data.items;t.totalRows=e.data.data.total,a.forEach((function(e,a){t.$set(e,"no",a+1+(t.currentPage-1)*t.perPage)})),t.items=a}})).catch((function(t){})).finally((function(){t.loading=!1}))},rowSelected:function(t){this.bootstrapTable.selected=t},deleteItem:function(t,e){var a=this,i=t.id,s={id:i},n="admin/delete_type";this.loading=!0,o["a"].post(n,JSON.stringify(s),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.currentUser.token)}}).then((function(t){t.data.success&&(a.addNotification("success filled","Success","Type Deleted"),a.getData())})).catch((function(t){a.addNotification("error filled","Error","Type delete failed.")})).finally((function(){a.loading=!1}))},editItem:function(t,e){this.item=Object(n["a"])({},t),this.$refs["modalbasic"].show()},newItem:function(){var t={id:-1,name:"",style:!1,sort:1};this.item=t,this.$refs["modalbasic"].show()},hideModal:function(){var t={id:-1,category_id:this.category_id,name:"",cal:0,carbs:0,fat:0,protein:0,fiber:0};this.calory=t,this.$refs["modalbasic"].hide()},saveItem:function(){var t=this;if(""!=this.item.name){var e="admin/save_type";this.loading=!0,o["a"].post(e,JSON.stringify(this.item),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.currentUser.token)}}).then((function(e){e.data.success&&(t.addNotification("success filled","Success","Item Saved"),t.getData())})).catch((function(e){t.addNotification("error filled","Error","Item save failed.")})).finally((function(){t.loading=!1,t.hideModal()}))}else this.addNotification("error filled","Error","Please input item name.")},addNotification:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This is Notify Title",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"This is Notify Message,<br>with html.";this.$notify(t,e,a,{duration:3e3,permanent:!1})}},mounted:function(){},beforeMount:function(){this.getData()},watch:{currentPage:function(){this.getData()}}},c=l,d=a("2877"),u=Object(d["a"])(c,i,s,!1,null,null,null);e["default"]=u.exports}}]);